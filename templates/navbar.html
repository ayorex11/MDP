<nav class="navbar">
  <div class="nav-container">
    <a href="{{ url_for('index') }}" class="nav-brand"> ğŸ›¡ï¸ MDP Predictor </a>

    <button class="hamburger" id="hamburger" aria-label="Toggle menu">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <div class="nav-menu" id="navMenu">
      {% if current_user.is_authenticated %}
      <a href="{{ url_for('predict') }}" class="nav-link">Quick Predict</a>
      <a href="{{ url_for('upload') }}" class="nav-link">Upload Data</a>
      <a href="{{ url_for('statistics') }}" class="nav-link">Statistics</a>
      <a href="{{ url_for('history') }}" class="nav-link">History</a>
      {% endif %}
    </div>

    <div class="nav-user">
      {% if current_user.is_authenticated %}
      <span class="user-greeting">ğŸ‘¤ {{ current_user.username }}</span>
      <a href="{{ url_for('profile') }}" class="nav-link">Profile</a>
      <a href="{{ url_for('logout') }}" class="nav-link">Logout</a>
      {% else %}
      <a href="{{ url_for('login') }}" class="nav-link">Login</a>
      <a href="{{ url_for('register') }}" class="nav-link">Register</a>
      {% endif %}
    </div>
  </div>
</nav>

<script>
  // Mobile menu toggle
  document.addEventListener("DOMContentLoaded", function () {
    const hamburger = document.getElementById("hamburger");
    const navMenu = document.getElementById("navMenu");

    if (hamburger && navMenu) {
      hamburger.addEventListener("click", function () {
        navMenu.classList.toggle("active");
      });

      // Close menu when clicking outside
      document.addEventListener("click", function (event) {
        const isClickInside =
          hamburger.contains(event.target) || navMenu.contains(event.target);
        if (!isClickInside && navMenu.classList.contains("active")) {
          navMenu.classList.remove("active");
        }
      });

      // Close menu when clicking a link
      const navLinks = navMenu.querySelectorAll(".nav-link");
      navLinks.forEach((link) => {
        link.addEventListener("click", function () {
          navMenu.classList.remove("active");
        });
      });
    }
  });
</script>
